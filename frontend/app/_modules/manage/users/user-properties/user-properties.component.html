<!-- Header -->
<h1 i18n="heading">User properties</h1>

<div [appSpinner]="loading.active" spinnerSize="lg">
    <ng-container *ngIf="user">
        <div class="row">
            <!-- Buttons -->
            <div class="col-sm-auto order-sm-last pb-3">
                <!-- Edit user button -->
                <a routerLink="edit" type="button" class="btn btn-secondary w-100">
                    <fa-icon [icon]="faEdit" class="me-1"></fa-icon>
                    <ng-container i18n>Edit user</ng-container>
                </a>
            </div>

            <!-- Detail table -->
            <div class="col-sm">
                <dl id="pageDetailTable" class="detail-table">
                    <!-- ID -->
                    <div>
                        <dt i18n>ID</dt>
                        <dd>
                            <ng-container>{{ user.id }}</ng-container>
                            <app-current-user-badge [userId]="user.id" class="ms-2"></app-current-user-badge>
                        </dd>
                    </div>
                    <!-- Federated user -->
                    <div *ngIf="user.federatedIdP as v">
                        <dt i18n>Federated user</dt>
                        <dd><app-idp-icon [idpId]="v" class="me-1"></app-idp-icon>{{ v }}/{{ user.federatedId || '*' }}</dd>
                    </div>
                    <!-- Name -->
                    <div>
                        <dt i18n>Name</dt>
                        <dd>{{ user.name }}</dd>
                    </div>
                    <!-- Email -->
                    <div *ngIf="user.email as v">
                        <dt i18n>Email</dt>
                        <dd>{{ v }}</dd>
                    </div>
                    <!-- Banned -->
                    <div *ngIf="user.banned">
                        <dt i18n>Banned</dt>
                        <dd>
                            <app-checkmark></app-checkmark>
                            <span *ngIf="user.bannedTime as v" class="text-muted"> ({{ v | datetime }})</span>
                        </dd>
                    </div>
                    <!-- Remarks -->
                    <div *ngIf="user.remarks as v">
                        <dt i18n>Remarks</dt>
                        <dd>{{ v }}</dd>
                    </div>
                    <!-- Website URL -->
                    <div *ngIf="user.websiteUrl as v">
                        <dt i18n>Website URL</dt>
                        <dd><a [href]="v" target="_blank" rel="nofollow noopener noreferrer">{{ v }}</a></dd>
                    </div>
                    <!-- System account -->
                    <div *ngIf="user.systemAccount">
                        <dt i18n>System account</dt>
                        <dd><app-checkmark></app-checkmark></dd>
                    </div>
                    <!-- Confirmed -->
                    <div *ngIf="user.confirmed">
                        <dt i18n>Confirmed</dt>
                        <dd>
                            <app-checkmark></app-checkmark>
                            <span *ngIf="user.confirmedTime as v" class="text-muted"> ({{ v | datetime }})</span>
                        </dd>
                    </div>
                    <!-- Superuser -->
                    <div *ngIf="user.isSuperuser">
                        <dt i18n>Superuser</dt>
                        <dd><app-checkmark></app-checkmark></dd>
                    </div>
                    <!-- Created -->
                    <div *ngIf="user.createdTime | datetime as v">
                        <dt i18n>Created</dt>
                        <dd>{{ v }}</dd>
                    </div>
                </dl>
            </div>
        </div>

        <!-- Domain roles -->
        <section>
            <!-- Heading -->
            <h2 i18n>Domain roles</h2>

            <!-- Domain/role list -->
            <div *ngIf="domainUsers" class="list-group">
                <ng-container *ngFor="let du of domainUsers">
                    <a *ngIf="domains.get(du.domainId!) as d" [routerLink]="[Paths.manage.domains, d.id]" class="list-group-item list-group-item-action">
                        <!-- Domain name/host -->
                        <div>
                            <span class="fw-bold">{{ d.host }}</span>
                            <app-domain-user-badge [domainUser]="du" class="ms-2"></app-domain-user-badge>
                        </div>
                        <div *ngIf="d.name">{{ d.name }}</div>
                    </a>
                </ng-container>
            </div>

            <!-- Placeholder when no data -->
            <app-no-data *ngIf="!domainUsers"></app-no-data>
        </section>
    </ng-container>

    <!-- Placeholder when no data -->
    <app-no-data *ngIf="!user"></app-no-data>
</div>
