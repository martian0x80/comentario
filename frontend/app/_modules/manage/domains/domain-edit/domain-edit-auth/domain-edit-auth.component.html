@if (formGroup) {
    <ng-container [formGroup]="formGroup">
        <!-- Info -->
        <app-info-block>
            <ng-container i18n>Choose what authentication methods your commenters will be able to use.</ng-container>
            <app-info-icon docLink="configuration/frontend/domain/authentication/" class="ms-2"/>
        </app-info-block>
        <!-- Anonymous comments -->
        <div class="form-check">
            <input formControlName="anonymous" type="checkbox" class="form-check-input" id="auth-anonymous">
            <label class="form-check-label" for="auth-anonymous" i18n>Anonymous comments</label>
        </div>
        <!-- Local auth -->
        <div class="form-check">
            <input formControlName="local" type="checkbox" class="form-check-input" id="auth-local">
            <label class="form-check-label" for="auth-local" i18n>Local (password-based)</label>
        </div>
        <!-- Federated IdPs -->
        <div formArrayName="fedIdps">
            @for (idp of federatedIdps; track idp.id; let idx = $index) {
                <div class="form-check">
                    <input [formControlName]="idx" type="checkbox" class="form-check-input" [id]="'auth-' + idp.id">
                    <label class="form-check-label" [for]="'auth-' + idp.id">{{ idp.name }}</label>
                </div>
            }
        </div>

        <!-- SSO -->
        <div class="form-check">
            <input formControlName="sso" type="checkbox" class="form-check-input" id="auth-sso">
            <label class="form-check-label" for="auth-sso">Single Sign-On</label>
            <app-info-icon docLink="configuration/frontend/domain/authentication/sso/" class="ms-2"/>
        </div>

        @if (formGroup.controls.sso.value) {
            <div class="ms-4">
                <!-- SSO server URL -->
                <div class="mb-2">
                    <label for="sso-url" class="form-label colon" i18n>SSO server URL</label>
                    <input formControlName="ssoUrl" type="url" class="form-control" id="sso-url"
                           [class.is-valid]="formGroup.controls.ssoUrl.touched && formGroup.controls.ssoUrl.valid"
                           [class.is-invalid]="formGroup.controls.ssoUrl.touched && formGroup.controls.ssoUrl.invalid"
                           placeholder="https://sso.example.com">
                    <!-- Invalid feedback -->
                    <div class="invalid-feedback" i18n>Please enter a valid URL.</div>
                </div>
                <!-- SSO -->
                <div class="form-check">
                    <input formControlName="ssoNonInt" type="checkbox" class="form-check-input" id="sso-non-interactive">
                    <label class="form-check-label" for="sso-non-interactive" i18n>Non-interactive</label>
                </div>
            </div>
        }
    </ng-container>
}
