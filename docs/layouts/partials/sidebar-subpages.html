<!----------------------------------------------------------------------------------------------------------------------
    Render a menu for subpages of the given section page.
    Context is a dictionary containing the following key-value pairs:
        page:   Page the menu is being rendered for
        curURL: URL of the current page (to determine whether the item is active)
----------------------------------------------------------------------------------------------------------------------->
{{- with .page.Pages }}
<ul class="nav">
    {{- range . }}
    {{- $cur := eq .Permalink $.curURL }}
    <li class="nav-item">
        <a class="nav-link{{ if $cur }} active{{ end }}" {{- if $cur }} aria-current="page"{{ end -}} href="{{ .RelPermalink }}">{{ .Title }}</a>

        <!-- If it's the current page or one of its parents, render its children (if any) -->
        {{- if hasPrefix $.curURL .Permalink }}
        {{- partial "sidebar-subpages" (dict "page" . "curURL" $.curURL) }}
        {{- end }}
    </li>
    {{- end }}
</ul>
{{- end }}
